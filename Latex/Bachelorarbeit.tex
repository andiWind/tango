\documentclass[a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[ngerman,german]{babel}
\usepackage[T1]{fontenc}
\usepackage{courier}
\usepackage{float}
\usepackage{amsmath,amsthm}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{tabularx}
\usepackage{graphicx}
\usepackage{cite}
\usepackage{csquotes}
\usepackage[font=small,labelfont=bf]{caption}

%\usepackage[pages=some]{background} % Draft Wasserzeichen mit Option pages=all sonst pages=some



\title{Bachelorarbeit}
\author{

	Andreas Windorfer\\
}
\date{\today}


\begin {document}


\maketitle
\newpage
Zusammenfassung
\newpage
\tableofcontents


\newpage

\section {Einleitung}
\section{Fazit}
\section{Dynamische binäre Suchbäume}
innerer Knoten\\
Teilbaum\\
Höhe Nur eine Wurzel vorhanden, dann Höhe 0\\
innerer Knoten, auch Wurzel\\
Rotationen\\
Einfügen\\
Suchen\\
Löschen\\
Bruder\\
\section{Balancierte Suchbäume}
\subsection{Rot-Schwarz-Baum}
Der Rot-Schwarz-Baum gehört zur Gruppe der balancierten binären Suchbäume. Zusätzlich zu den Zeigern \textit{links}, \textit{rechts} und \textit{vater} benötigt jeder Knoten ein zusätzliches Bit Speicherplatz, um die Farbinformation zu speichern. Der Name der Datenstruktur kommt daher, dass die beiden durch das zusätzliche Bit unterschiedenen Zustände als \textit{Rot} und \textit{Schwarz} bezeichnet werden. Die Farbe ist also eine Eigenschaft der Knoten. Zeiger auf Kinder oder Väter die aktuell im Baum nicht vorhanden sind zeigen auf einen schwarzen Sonderknoten. Dieser Sonderknoten enthält in dieser Arbeit den Schlüsselwert \textit{null}.  


\noindent Folgende zusätzliche Eigenschaften müssen bei einem Rot-Schwarz-Baum erfüllt sein. 

\begin{enumerate}
	\item Jeder Knoten ist entweder rot oder schwarz.
	\item Die Wurzel ist schwarz.
	\item Jedes Blatt ist schwarz.
	\item Beide Kinder eines roten Knotens sind schwarz.
	\item Für jeden Knoten enthalten alle Pfade, die an diesem Knoten starten und in einem Blatt enden, die gleiche Anzahl an schwarzen Knoten. 
\end{enumerate}  

\noindent  Der Zweck dieser Einschränkungen ist es die Höhe des Rot-Schwarz-Baumes zu begrenzen, um die üblichen Operationen effizient ausführen zu können. Als Schwarz-Höhe $\mathit{bh(x)}$ eines Knoten $x$ wird die Anzahl der schwarzen Knoten in einem Pfad, der am dem Knotens startet und bei einem Blatt endet, bezeichnet. Die eigene Farbe des betrachteten Knotens bleibt dabei außen vor. Aufgrund der Eigenschaft fünf ist die Schwarz-Höhe eines Knotens wohldefiniert. Die Höhe $h$ ist beim Rot-Schwarz-Baum wie bei anderen binären Suchbäumen definiert und berücksichtigt auch die roten Knoten. 
\\
\begin{figure}[h]
	\centering
	\includegraphics[width= 1\textwidth]{"Medien/RotSchwarzBaum/IOBaum"}
	\caption{Rot-Schwarz-Baum ohne Verletzung von Eigenschaften. }
	\label{fig:IOBaum}
\end{figure}
\begin{figure}[h]
	\centering
	\includegraphics[width= 1\textwidth]{"Medien/RotSchwarzBaum/NIOBaumZweiRote"}
	\caption{Rot-Schwarz-Baum bei dem Eigenschaft 4 verletzt ist. }
	\label{fig:NIOBaumZweiRote}
\end{figure}
\begin{figure}[h]
	\centering
	\includegraphics[width= 1\textwidth]{"Medien/RotSchwarzBaum/NIOBaumPfadlänge"}
	\caption{Rot-Schwarz-Baum bei dem Eigenschaft fünf verletzt ist.  }
	\label{fig:NIOBaumPfadlänge}
\end{figure}


\subsubsection{Einfügen in den Rot-Schwarz-Baum}
Ein neuer Schlüssel wird zunächst wie in Ref: (normales Einfügen) eingefügt. Zusätzlich werden dann noch die Zeiger auf die Kinder auf den schwarzen Sonderzeiger gesetzt. Der neue Knoten wird rot gefärbt. Durch den neu eingefügten Knoten können Korrekturen notwendig werden, um die Rot-Schwarz-Baum Eigenschaften zu erhalten. Zunächst betrachten wir welche der fünf Eigenschaften betroffen sein können. Es ist immer noch jeder Knoten entweder rot oder schwarz. Aufgrund des Sonderknotens sind die Blätter immer noch schwarz. Da der neue Knoten rot ist, ändern sich die Schwarz-Höhen anderer Knoten nicht. Beide Pfade die von neu eingefügten Knoten starten können haben Schwarz-Höhe eins. Eigenschaft fünf bleibt also erhalten. Eigenschaft vier ist verletzt, wenn der Vater des neuen Knotens ebenfalls rot ist. Eine rote Wurzel erhält man nur wenn in den leeren Baum eingefügt wurde. Es kann also nur eine der beiden Eigenschaften zwei oder vier verletzt sein, aber nicht beide.

 \noindent Zur Korrektur wird mit einer zusätzlichen Routine gearbeitet. Diese Routine arbeitet sich von der Einfügestelle solange nach oben in einer Schleife durch, bis alle Eigenschaften wieder erfüllt sind. Die Schleifenbedingung ist, dass eine Verletzung vorliegt. Dazu muss einfach geprüft werden ob der betrachtete rote Knoten die Wurzel ist, oder einen roten Vorgänger hat. Beim ersten Durchlauf wird der neu eingefügte Knoten übergeben. Innerhalb der Schleife werden sechs Fälle unterschieden. Im folgenden wird auf vier Fälle detailliert eingegangen. Die restlichen zwei verhalten sich symmetrisch zu einem solchen. Jeder der Fälle verantwortet, dass zum Start der nächsten Iteration wieder nur eine der beiden Eigenschaften zwei oder vier verletzt ist. Eigenschaft eins bleibt in der Beschreibung außen vor, da es während der gesamten Laufzeit der Routine nur Knoten gibt, die rot oder schwarz sind. \\
\textbf{Fall 1: Die Wurzel ist rot: }
Dieser Fall wird behandelt in dem man die Wurzel schwarz färbt. Man muss noch zeigen, dass es durch das Umfärben zu keiner weiteren Verletzung gekommen ist. Bei den Eigenschaften zwei und drei sieht man das direkt. Die Vierte kann nicht verletzt worden sein, da kein roter Knoten hinzugekommen ist. Die Fünfte wurde nicht beeinträchtigt, da die Wurzel bei keiner Schwarz-Höhe eines Knotens beachtet werden muss.   \\
Es wird also keine Eigenschaft mehr verletzt und die Schleife wird keine weitere Iteration durchführen.

\noindent Die Fälle 2 - 6 behandeln nun die Situation zweier aufeinanderfolgender roter Knoten. Der untere rote Knoten wird als $x$ bezeichnet, der obere als $y$. Da in einen Baum eingefügt wurde, der alle fünf Eigenschaften erfüllt muss $y$ einen Bruder haben.  Denn da $y$ rot ist, kann es nicht die Wurzel sein, also muss auch $y$ einen Vater $z$ haben. Von $z$ aus starten über $y$ mindestens zwei Pfade zu schwarzen Blättern. Hätte $z$ nicht auch einen rechten Kind Knoten, wäre bereits vor der Iteration Eigenschaft fünf verletzt gewesen.  \\
\noindent\textbf{Fall 2: Der Bruder von $y$ ist rot: }
\noindent Diesen Fall veranschaulicht Abbildung \ref{fig:EinfügenFixUpFall1}. Da $y$ rot ist, muss $z$ nach Eigenschaft vier schwarz sein. Nun wird $z$ rot gefärbt und beide Kinder von $z$, also $y$ und dessen Bruder, schwarz. Somit hat $x$ nun einen schwarzen Vorgänger und die Verletzung der Eigenschaft vier wurde an dieser Stelle behoben. Wie sieht es aber mit den Verletzungen insgesamt aus ? \\
Der rot umgefärbte Knoten $z$ hat zwei Kinder, somit wurde kein Blatt rot gefärbt. Die Schwarz-Höhen der Pfade mit $z$ als inneren Knoten ändern sich nicht, da sie auch genau eines der schwarz umgefärbten Kinder von $z$ enthalten müssen. Die Schwarz-Höhen der Pfade mit $z$ als Startknoten werden um eins verringert. Dies gilt jedoch für jeden von ihnen, so dass Eigenschaft fünf weiterhin nicht verletzt wird. Wenn der rot gefärbte Knoten $z$ nicht die Wurzel ist, könnte er einen roten Vorgänger haben und Eigenschaft vier ist weiterhin Verletzt, das Problem liegt nun aber zwei Baumebenen höher. Wenn $z$ die Wurzel ist kann Eigenschaft vier nicht mehr verletzt sein, allerdings hat man nun eine rote Wurzel. Man ist also in der Situation die nächste Iteration durchführen zu können.\\
\begin{figure}[h]
	\centering
	\includegraphics[width= 1\textwidth]{"Medien/RotSchwarzBaum/EinfügenFixUpFall2"}
	\caption{Einfügen Korrektur. Dargestellt ist eine Iteration mit Fall 2  }
	\label{fig:EinfügenFixUpFall2}
\end{figure}

\noindent\textbf{Fall 3: $y$ ist ein linker Nachfolger und sein Bruder ist schwarz. $z$ ist linker Nachfolger: }

     


\begin{figure}[h]
	\centering
	\includegraphics[width= 1\textwidth]{"Medien/RotSchwarzBaum/EinfügenFixUpFall3"}
	\caption{Einfügen Korrektur. Dargestellt ist Fall 3  }
	\label{fig:EinfügenFixUpFall3}
\end{figure}



   
\subsubsection{Löschen aus dem Rot-Schwarz-Baum}

\subsubsection{Suchen im Rot-Schwarz-Baum}


\noindent\textbf{Lemma: Maximale Höhe des Rot-Schwarz-Baum}:\\
Für einen Rot-Schwarz-Baum mit Höhe $h$ und $n$ inneren Knoten gilt $h \leq  2 lg(n + 1)$. \\
\noindent\textbf{Beweis:}\\
Zunächst wird gezeigt, dass ein Teilbaum $t_1$ mit Wurzel $x_1$ und Schwarzhöhe $\mathit{bh(x_1)}$ zumindest über $2^{bh(x_1)} - 1$ innere Knoten verfügt, also $n \geq 2^{bh(x_1)} - 1 $. Dies wird durch Induktion über die Höhe $\mathit{h_{x_1}}$ gezeigt. Für $\mathit{h_{x_1}} = 0$ besteht $t_1$ nur aus einem Blatt und enthält keine inneren Knoten. Natürlich gilt in diesem Fall auch $\mathit{bh(t_1) = 0}$.  \\
Induktionsanfang mit $\mathit{h_{x_1} = 0}$ :\\
$2^{0} - 1 = 0$\\
Induktionsschritt:\\
Nun wird ein Teilbaum $T_2$ mit Wurzel $x_2$ mit Höhe $h + 1$ betrachtet. Jedes seiner beiden Kinder hat entweder Schwarzhöhe  $\mathit{bh(x_2)}$, wenn es rot ist, oder $\mathit{bh(x_2) - 1}$, wenn es schwarz ist. Die Höhe beider Kinder ist niedriger als die eigene Höhe von $x_2$. Somit kann bei beiden Kindern jeweils die Induktionsnahme für die Mindestanzahl der inneren Knoten eingesetzt werden.   \\
$2^{bh(x_1)-1} - 1 + 2^{bh(x_1)-1} - 1  = 2^{bh(x_1)} - 2 $ \\
Addiert man einen inneren Knoten aufgrund der Wurzel $x_2$ hinzu, erhält man die Behauptung.\\
$2^{bh(x_1)} - 2 + 1 = 2^{bh(x_1)} - 1 $.\\
Es gilt also $n \geq 2^{\mathit{bh(x)}} - 1$.

\noindent Auf einem Pfad in einem Rot-Schwarz-Baum $t_3$ von der Wurzel bis zu einem Blatt sind der erste und der letzte Knoten, sowie mindestens jeder zweite der weiteren Knoten schwarz. Es gilt also $\mathit{bh(t_3)} \geq \frac{h(t_3)}{2}$. 
Damit kann man in der Ungleichung $\mathit{bh(t_3)}$ durch $\mathit{h(t_3)}$ ersetzen, woraus dann das Lemma folgt.\\
$n \geq 2^{\frac{\mathit{h(t_3)}}{2}} - 1 \Rightarrow n + 1 \geq 2^{\frac{\mathit{h(t_3)}}{2}} \Rightarrow
\lg(n + 1) \geq \frac{h(t_3)}{2} \Rightarrow 2 lg(n + 1) \geq h(t_3) $ 



\newpage
\bibliography{literaturverzeichnis}
\bibliographystyle{unsrt}

\end {document}