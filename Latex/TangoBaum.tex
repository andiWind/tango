\documentclass[a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[ngerman,german]{babel}
\usepackage[T1]{fontenc}
\usepackage{courier}
\usepackage{float}
\usepackage{amsmath,amsthm}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{tabularx}
\usepackage{graphicx}
\usepackage{cite}
\usepackage{csquotes}
\usepackage[font=small,labelfont=bf]{caption}

%\usepackage[pages=some]{background} % Draft Wasserzeichen mit Option pages=all sonst pages=some



\title{Bachelorarbeit}
\author{
Andreas Windorfer\\
}
\date{\today}

\begin {document}



\maketitle
\newpage

\tableofcontents
\newpage

\section{Tango Baum}
Der Tango Baum ist ein aus BSTs, den \textbf{auxiliary trees}, bestehender BST. Auf die Anforderungen an die auxiliary trees wird in Abschnitt \ref{aufbauDesTango} eingegangen und mit dem Rot-Schwarz-Baum wird eine mögliche Variante noch detailliert vorgestellt. Der Tango Baum wurde in \cite{demainDinamicOpti},von Demaine, Harmon, Iacono und Patrascu beschrieben, inklusive eines Beweises über seine $\mathit{lg} \, \mathit{lg} \, n $-competitiveness. Ebenfalls in \cite{demainDinamicOpti} enthalten ist eine als \textbf{Interleave Lower Bound} bezeichnete Variation der ersten unteren Schranke von Wilber. Da diese für das Verständnis des Tango Baumes wesentlich ist, wird mit ihr gestartet, bevor es zur Beschreibung der Struktur selbst kommt. 


\subsection{Interleave Lower Bound}
  Sei $X$ eine Zugriffsfolge und sei $K = \{k \in \mathbb{N} \vert k \textit{ ist in X enthalten}\}$. Auch hier wird ein lower bound tree verwendet, dieser ist jedoch etwas anders definiert als in Abschnitt \ref{wilber bound}. Hier ist der lower bound tree $Y$ zu einer Zugriffsfolge $X$, der vollständig balancierte BST mit Schlüsselmenge $K$, bei dem die unterste Ebene von links startend nach rechts besetzt wird. Auch in der untersten Ebene gibt es also keine Möglichkeit einen Knoten links von einem bereits vorhandenen Knoten einzufügen. Anders als in Abschnitt \ref{wilber bound}  gibt es hier somit zu jeder Zugriffssequenz nur genau einen lower bound tree. Abbildung \ref{fig:demlowerBoundTree} zeigt den lower bound tree zur Zugriffsfolge $1, 2,.., 15$. Zu jedem Knoten $v$ in $Y$ werden zwei Mengen definiert. Die \textbf{linke Region} von $v$ enthält den Schlüssel von $v$, sowie die im linken Teilbaum von $v$ enthaltenen Schlüssel.  Die \textbf{rechte Region} von $v$ enthält die im rechten Teilbaum von $v$ enthaltenen Schlüssel. Sei $l$ der kleinste Schlüssel im Teilbaum mit Wurzel $v$ und $r$ der größte. Sei $X = \{x_1,x_2,.,x_m\}$ die Zugriffssequenz und $X^r_l = {x_{1'},x_{'2},..,x_{jm'}}$ wie in Abschnitt \ref{wilbr bound} definiert. $i \in \{2,3,..,m'\}$ ist ein \enquote{Interleave durch $v$} wenn $x_{\left(i -1\right)}$ in der linken Region von $v$ liegt und $x_i$ in der rechten Region von $v$, oder umgekehrt. Sei \textit{inScore($v$)} die Funktion die zu dem Knoten $v$ die Anzahl der Interleaves durch $v$ zurückgibt. Sei $U$ die Menge der Knoten von $Y$. Die Funktion \textit{IB$\left(X\right)$} ist definiert durch:
\begin{align*}
\mathit{IB}\left(X\right) = \sum_{u \in U} \mathit{inScore}\left(u\right)
\end{align*}
Sei $T_0$ der BST mit Schlüsselmenge $K$ auf $X$ ausgeführt wird. Für $i \in \{1,2,..,m\}$ sei $T_i$ der BST, der entsteht nachdem \textit{access}$\left(x_i\right)$ auf $T_{i-1}$ ausgeführt wurde. Zu $u \in U$ und  $j \in \{0,1,..,m\}$ gibt es einen \textbf{transition point} $v$ in $T_j$. $v$ ist ein Knoten mit folgenden Eigenschaften:\\
\begin{enumerate}
	\item Der Pfad von der Wurzel von $T_j$ zu $v$ enthält einen Knoten dessen Schlüssel in der linken Region von $u$ enthalten ist.
	\item Der Pfad von der Wurzel von $T_j$ zu $v$ enthält einen Knoten dessen Schlüssel in der rechten Region von $u$ enthalten ist.
	\item In $T_i$ ist kein Knoten mit Eigenschaft 1 und 2 enthalten, der eine kleinere Tiefe als $v$ hat. 
\end{enumerate}
 \begin{figure}[h]
 	\centering
 	\includegraphics[width=1\textwidth]{"Medien/Tango/lowerBoundTree"}
 	\caption{Der lower bound tree zur Zugriffsfolge $1 ,2, .., 15$  }
 	\label{fig:demlowerBoundTree}
 \end{figure}
Aufgrund Punkt 2 kann ein Knoten $u \in U$ keinen transition point haben wenn seine rechte Region die leere Menge ist. 
\noindent Im Beweis dieses Abschnittes wird gezeigt das $\mathit{OPT}\left(X\right) \geq \frac{\mathit{IB}\left(X\right)}{2} - n$ gilt. Dafür werden jedoch noch drei Lemmas zu den Eigenschaften von $Y$ benötigt. 
\newtheorem{Lemma1}{Lemma}[section] 
\begin{Lemma1} \label{demaineLemma1}
Sei $X = x_1,x_2,..,x_m$ eine Zugriffssequenz und $Y$ ein zu $X$ erstellter lower bound tree mit Schlüselmenge $K$. Sei $T_0$ der BST mit Schlüsselmenge $K$ auf dem $X$ ausgeführt wird. Für $i \in \{1,2,..,m\}$ sei $T_i$ der BST der durch Ausführen von \textit{access}$\left(x_i\right)$ auf $T_{\left(i-1\right)}$ entsteht. Sei $U$ die Menge der Knoten von $Y$. Dann gibt es zu jedem Knoten $u \in U$ und $j \in \{0,1,..,m\}$ genau einen transition point in $T_j$. 	
\end{Lemma1}


\begin{proof}
Sei $l$ der kleinste Schlüssel in der linken Region von $u$ und $r$ der Größte. Im Teilbaum mit Wurzel $u$ sind genau die Schlüssel $K^r_l = \{k \in K \vert k \in \left[l,r\right]\}$ enthalten. Sei $v_l$ der gemeinsame Vorfahre aller Knoten mit einem Schlüssel aus der linken Region von $u$ in $T_j$, mit der kleinsten Tiefe. Sei $v_r$ der gemeinsame Vorfahre aller Knoten mit einem Schlüssel aus der rechten Region von $u$ in $T_j$, mit der kleinsten Tiefe. $\mathit{key\left(l\right)}$ bzw. $\mathit{key\left(r\right)}$ muss selbst in der linken bzw. rechten Region von $u$ enthalten sein, vergleiche \ref{wilberLowerBoundTree}. Sei $w$ der gemeinsame Vorfahre aller Schlüssel aus der linken und der rechten Region von $u$ in $T^r_l$. Es muss $\mathit{key}\left(w\right) \in \left[l,r\right]$ gelten. Somit muss  $\mathit{key}\left(w\right)$ entweder in der linken oder rechten Region von $u$ enthalten sein. Da $w$ der Knoten mit der kleinsten Tiefe sein muss, für den  $\mathit{key\left(w\right)} \in \left[l,r\right]$  gilt, muss entweder $w = v_l$ oder $w = v_r$ gelten, je nachdem wessen Tiefe kleiner ist. Für den Fall $w = v_l$ ist $v_r$ der transition point in $T^r_l$ zu $u$ und für den Fall $w = v_r$ ist es $v_l$.
Es wird der Fall $w = v_l$ betrachtet, der andere kann direkt daraus abgeleitet werden. Im Pfad $P_u = v_0,v_1,..,v_r$ von der Wurzel zu $v_r$ ist $v_l$ enthalten und da $v_r$ ein gemeinsamer Vorfahre der Schlüssel aus der rechten Region von $u$ ist muss $v_r$ der einige Knoten mit einem Schlüssel aus der rechten Region von $u$ in $P_u$ sein. In jedem Pfad $P$ in $T_l^r$ von der Wurzel zu einem Knoten mit einem Schlüssel aus der rechten Region von $u$ muss mit $v_0,v_1,..,v_r$ beginnen, somit kann es keinen weiteren transition point für $u$ in $T_j$ geben. 
	
\end{proof}
\noindent Der Knoten auf den der Zeiger $p$ zum ausführen von \textit{access} gerade zeigt wird als \textbf{berührter} Knoten bezeichnet.
 Im zweiten Lemma geht es darum das sich der transition point $v$ eines Knoten nicht verändern kann, solange $v$ nicht wenigstens einmal der berührte Knoten war. In den zwei verbleibenden Lemmas seien  $T_j$, $X$, $Y$ und $u$ wie in  Lemma \ref{demaineLemma1} definiert. 



\newtheorem{Lemma2}{Lemma}[section] \label{lemmaDemaine2}
\begin{Lemma2} \label{demaineLemma2}
Sei $v$ der transition point zu $u$ in $T_j$.  Sei  $k \in \mathit{N}$, mit $j \leq k \leq m$. Gilt für alle $x_i$, mit $i \in \left[j,k\right]$, während der Ausführung von \textit{access}$\left(x_i\right)$,  $v$ war nicht wenigstens einmal der berührte Knoten, dann ist $v$ während der gesamten Ausführungszeit von $\textit{access}\left(x_j\right),\textit{access}\left(x_{j+1}\right),..,\textit{access}\left(x_k\right)$ der transition point zu $u$ in $T_k$. 
\end{Lemma2}

\begin{proof}
 Sei $v_l$ der gemeinsame Vorfahre aller Knoten mit einem Schlüssel aus der linken Region von $u$ in $T_j$, mit der kleinsten Tiefe. Sei $v_r$ der gemeinsame Vorfahre aller Knoten mit einem Schlüssel aus der rechten Region von $u$ in $T_j$, mit der kleinsten Tiefe. Hier wird wieder ohne Verlust der Allgemeinheit der Fall $v = v_r$ betrachtet. Da $v_r$ nicht berührt wird, wird auch kein Knoten in der rechten Region von $u$ berührt. $v_r$ ist somit während der gesamten Ausführungszeit von $\textit{access}\left(x_j\right),\textit{access}\left(x_{j+1}\right),..,\textit{access}\left(x_k\right)$  der gemeinsame Vorfahre der Schlüssel aus der rechten Region von $u$ mit der kleinsten Tiefe. Knoten mit Schlüssel in der linken Region von $u$ könnten berührt werden. Zu einem Ausführungszeitpunkt $i$ kann deshalb ein Knoten $v_{li} \ne v_l$ mit einem Schlüssel aus der linken Region von $u$ der gemeinsame Vorfahre der Knoten mit diesen Schlüsseln mit der kleinsten Tiefe sein. Da $v_r$ nicht berührt wird kann zu keinem Zeitpunkt $v_l$ im Teilbaum mit Wurzel $v_r$ enthalten sein. Somit kann auch $v_{li}$ nicht in diesem Teilbaum enthalten sein. Somit muss die Tiefe von  $v_{li}$ kleiner sein, als die von $v_r$ und $v_r$ bleibt der transition point von $u$. 
\end{proof}

Im dritten Lemma wird gezeigt dass ein Knoten $v$ in $T_j$ nur der transition point zu einem Knoten aus $U$ sein kann.

\newtheorem{Lemma3}{Lemma}[section] \label{lemmaDemaine3}
\begin{Lemma3}
	Sei $u_1, u_2 \in U$, mit $u_1 \ne u_2$.  Sei $v$ ein Knoten in $T_j$. $v$ kann nicht sowohl der transition point von $u_1$, als auch der von $u_2$ sein.
\end{Lemma3}

\begin{proof}
 Sei $v_l$ bzw $v_r$ der gemeinsame Vorfahre aller Knoten mit einem Schlüssel aus der linken bzw. rechten Region von $u_1$ in $T_j$, mit der kleinsten Tiefe.  Sei $w_l$ bzw. $w_r$ der gemeinsame Vorfahre aller Knoten mit einem Schlüssel aus der linken bzw. rechten Region von $u_2$ in $T_j$, mit der kleinsten Tiefe. Ist weder $u_1$ ein Vorfahre von $u_2$ noch $u_2$ einer von $u_1$, dann muss auch $w_l \ne v_l \land w_l \ne v_r$ sowie $w_r \ne v_l \land w_r \ne v_r$ gelten. Somit müssen die transition points von $u_1$ und $u_2$ unterschiedlich sein. Sei, ohne Verlust der Allgemeinheit, $u_1$ ein Vorfahre von $u_2$. Ist der Schlüssel des transition point $v_1$ von $u_1$ nicht im Teilbaum von $u_2$ enthalten, kann $v_1$ nicht der transition point von $u_2$ sein. Nun sei $\mathit{key}\left(v_1\right)$ im Teilbaum mit Wurzel $u_2$ enthalten. $\mathit{key}\left(v_1\right)$ muss in der linken bzw. rechten Region von $u_1$ enthalten sein. Wir nehmen ohne Verlust der Allgemeinheit an, dass es die linke Region ist. Es müssen alle Schlüssel im Teilbaum mit der Wurzel $u_2$ in der linken Region von $u_1$ enthalten sein. Da der Schlüssel von $v_1$ in der linken Region von $u_1$ liegt, muss $w_r$ ein Vorfahre von $w_l$ in $T_j$ sein. $\mathit{key}\left(v_1\right)$ muss der Schlüssel von $l_2$ bzw. $r_2$ sein, je nachdem wessen Tiefe kleiner ist. Denn andererseits könnte man einen Pfad von der Wurzel von $T_j$ zu $v_1$ angeben der zwei Knoten aus der linken Region von $u_1$ enthält, dass ist jedoch ein Widerspruch dazu, dass  $\mathit{key}\left(v_1\right)$ in der linken Region von $u_1$ enthalten ist und zudem der transition point für $u_1$ ist. $v_2$ ist entweder der Knoten $l_2$ oder $r_2$ je nachdem wessen Tiefe größer ist, somit gilt $v_1 \ne v_2$.

\end{proof}
\newtheorem{Satz2}{Satz}[section] \label{satzDemaine1}
\begin{Satz2} 
$\mathit{IB}\left(X\right) /2 - n$ ist eine untere Schranke für $\mathit{OPT}\left(X\right)$.
\end{Satz2}
\begin{proof}
Es wird die Mindestanzahl der Berührungen von transition points gezählt. Durch Lemma3 kann die Anzahl der Berührungen für jedes $y \in P$ einzeln durchgeführt werden, diese müssen dann lediglich noch aufaddiert werden. Sei $l$ und $r$ wie in Lemma1 zu $y$ definiert, so dass entweder $l$ oder $r$ der transition point zu $y$ sein muss, je nachdem welcher der beiden Knoten die größere Tiefe hat.   
	
\end{proof}















\subsection{Aufbau des Tango Baum} \label{aufbauDesTango}
\subsection{Die \textit{access} Operation beim Tango Baum}
\subsection{Laufzeitanalyse}
\newpage
\bibliography{literaturverzeichnis}
\bibliographystyle{unsrt}

\end {document}


